= windows

[horizontal]
*Invoker*:: python3
*Function*:: link:windows.py[windows.py]
*Input*:: discrete, slide
*Output*:: discrete_out, slide_out


=== prerequisites

1. riff is deployed
2. the `riff` CLI is on your PATH
3. the python3 invoker is installed

    riff invokers apply -f https://github.com/projectriff/python3-function-invoker/raw/master/python3-invoker.yaml

4. the working directory is `samples/windows`

=== discrete window

==== create the function 

```
riff create python3 --name discrete --handler=discrete_window --output discrete_out
```

==== publish some messages and monitor the output topic

```
for i in `seq 1 100`; do riff publish -d $i --input discrete; done;

curl https://raw.githubusercontent.com/projectriff/riff/master/topics | bash -s tail -n discrete_out
```
You should see something like:

```
 Content-type["text/plain"]["1", "2", "3"]
�
 Content-type["text/plain"]["4", "5", "6"]
�
 Content-type["text/plain"]["7", "8", "9"]
�
 Content-type["text/plain"]["10", "11", "12"]
```

==== delete the function and its topics

```
riff delete -n discrete --all
```
=== sliding window

==== create the function 

```
riff create python3 --name slide --handler=sliding_window --output slide_out
```

==== publish some messages and monitor the output topic

```
for i in `seq 1 100`; do riff publish -d $i --input slide; done;

curl https://raw.githubusercontent.com/projectriff/riff/master/topics | bash -s tail -n slide_out
```

You should see something like:

```
 Content-type["text/plain"]["1", "2", "3"]
�
 Content-type["text/plain"]["2", "3", "4"]
�
 Content-type["text/plain"]["3", "4", "5"]
�
 Content-type["text/plain"]["4", "5", "6"]
```

==== delete the function and its topics

```
riff delete -n slide --all
```
